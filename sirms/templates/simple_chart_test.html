<!DOCTYPE html>
<html>
<head>
    <title>Simple Chart Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .test-container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .chart-box { width: 100%; height: 400px; border: 2px solid #ddd; margin: 20px 0; position: relative; background: #fafafa; }
        .status { padding: 15px; margin: 10px 0; border-radius: 5px; font-weight: bold; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .loading { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Chart.js Diagnostic Test</h1>
        
        <div id="status" class="status loading">
            ‚è≥ Loading Chart.js library...
        </div>
        
        <div class="chart-box">
            <canvas id="testChart" width="400" height="200"></canvas>
        </div>
        
        <div id="details" style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px;">
            <h3>Diagnostic Information:</h3>
            <ul id="diagnostics"></ul>
        </div>
    </div>

    <!-- Load Chart.js from local file -->
    <script src="/static/js/chart.js"></script>
    <script>
        const statusDiv = document.getElementById('status');
        const diagnostics = document.getElementById('diagnostics');
        
        function addDiagnostic(message, isGood = true) {
            const li = document.createElement('li');
            li.innerHTML = (isGood ? '‚úÖ ' : '‚ùå ') + message;
            li.style.color = isGood ? 'green' : 'red';
            li.style.margin = '5px 0';
            diagnostics.appendChild(li);
        }
        
        // Wait for DOM to be ready
        document.addEventListener('DOMContentLoaded', function() {
            addDiagnostic('DOM loaded successfully');
            
            // Check if Chart.js loaded
            setTimeout(function() {
                if (typeof Chart !== 'undefined') {
                    addDiagnostic('Chart.js library loaded successfully');
                    
                    try {
                        // Create a simple test chart
                        const ctx = document.getElementById('testChart');
                        const chart = new Chart(ctx, {
                            type: 'bar',
                            data: {
                                labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple'],
                                datasets: [{
                                    label: 'Test Data',
                                    data: [12, 19, 3, 5, 2],
                                    backgroundColor: [
                                        'rgba(255, 99, 132, 0.8)',
                                        'rgba(54, 162, 235, 0.8)',
                                        'rgba(255, 205, 86, 0.8)',
                                        'rgba(75, 192, 192, 0.8)',
                                        'rgba(153, 102, 255, 0.8)'
                                    ],
                                    borderColor: [
                                        'rgba(255, 99, 132, 1)',
                                        'rgba(54, 162, 235, 1)',
                                        'rgba(255, 205, 86, 1)',
                                        'rgba(75, 192, 192, 1)',
                                        'rgba(153, 102, 255, 1)'
                                    ],
                                    borderWidth: 2
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    title: {
                                        display: true,
                                        text: 'Chart.js Test - If you see colorful bars, it works!'
                                    }
                                },
                                scales: {
                                    y: {
                                        beginAtZero: true
                                    }
                                }
                            }
                        });
                        
                        addDiagnostic('Chart created successfully');
                        addDiagnostic('Chart rendered with colors and data');
                        
                        statusDiv.className = 'status success';
                        statusDiv.innerHTML = 'üéâ SUCCESS: Chart.js is working perfectly!<br>You should see a colorful bar chart above.';
                        
                    } catch (error) {
                        addDiagnostic('Chart creation failed: ' + error.message, false);
                        statusDiv.className = 'status error';
                        statusDiv.innerHTML = '‚ùå ERROR: Chart creation failed - ' + error.message;
                    }
                    
                } else {
                    addDiagnostic('Chart.js library failed to load', false);
                    addDiagnostic('Possible causes: No internet connection, CDN blocked, or browser compatibility', false);
                    
                    statusDiv.className = 'status error';
                    statusDiv.innerHTML = '‚ùå ERROR: Chart.js library did not load<br>Check your internet connection and try refreshing.';
                }
            }, 1000);
        });
    </script>
</body>
</html>